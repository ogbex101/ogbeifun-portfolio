{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/ogbeifun-portfolio/src/app/api/projects/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { PrismaClient } from '@prisma/client'\r\n\r\nconst prisma = new PrismaClient()\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    console.log('üì® Received project creation request')\r\n    \r\n    const body = await request.json()\r\n    console.log('üìù Request body:', body)\r\n    \r\n    // Validate required fields\r\n    if (!body.title || !body.description || !body.technologiesString || !body.category) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n    \r\n    console.log('üõ¢ Attempting to create project in database...')\r\n    \r\n    const project = await prisma.project.create({\r\n      data: {\r\n        title: body.title,\r\n        description: body.description,\r\n        technologiesString: body.technologiesString,\r\n        githubUrl: body.githubUrl || null,\r\n        liveUrl: body.liveUrl || null,\r\n        category: body.category,\r\n        featured: body.featured || false,\r\n      },\r\n    })\r\n\r\n    console.log('‚úÖ Project created successfully:', project.id)\r\n    \r\n    return NextResponse.json(project)\r\n  } catch (error: any) {\r\n    console.error('‚ùå Error creating project:', error)\r\n    \r\n    // More specific error messages\r\n    if (error.code === 'P2002') {\r\n      return NextResponse.json(\r\n        { error: 'Project with this title already exists' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n    \r\n    return NextResponse.json(\r\n      { error: `Database error: ${error.message}` },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\nexport async function GET() {\r\n  try {\r\n    const projects = await prisma.project.findMany({\r\n      include: {\r\n        images: {\r\n          orderBy: {\r\n            order: 'asc'\r\n          }\r\n        }\r\n      },\r\n      orderBy: {\r\n        createdAt: 'desc'\r\n      }\r\n    })\r\n\r\n    return NextResponse.json(projects)\r\n  } catch (error: any) {\r\n    console.error('Error fetching projects:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch projects' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,QAAQ,GAAG,CAAC;QAEZ,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,QAAQ,GAAG,CAAC,oBAAoB;QAEhC,2BAA2B;QAC3B,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,WAAW,IAAI,CAAC,KAAK,kBAAkB,IAAI,CAAC,KAAK,QAAQ,EAAE;YAClF,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC;QAEZ,MAAM,UAAU,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC;YAC1C,MAAM;gBACJ,OAAO,KAAK,KAAK;gBACjB,aAAa,KAAK,WAAW;gBAC7B,oBAAoB,KAAK,kBAAkB;gBAC3C,WAAW,KAAK,SAAS,IAAI;gBAC7B,SAAS,KAAK,OAAO,IAAI;gBACzB,UAAU,KAAK,QAAQ;gBACvB,UAAU,KAAK,QAAQ,IAAI;YAC7B;QACF;QAEA,QAAQ,GAAG,CAAC,mCAAmC,QAAQ,EAAE;QAEzD,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,6BAA6B;QAE3C,+BAA+B;QAC/B,IAAI,MAAM,IAAI,KAAK,SAAS;YAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyC,GAClD;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,CAAC,gBAAgB,EAAE,MAAM,OAAO,EAAE;QAAC,GAC5C;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,OAAO,CAAC,QAAQ,CAAC;YAC7C,SAAS;gBACP,QAAQ;oBACN,SAAS;wBACP,OAAO;oBACT;gBACF;YACF;YACA,SAAS;gBACP,WAAW;YACb;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}